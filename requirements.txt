# ==============================================================================
# CosyVoice_app - 跨平台依赖文件 (macOS + Windows + Linux)
# Python 版本要求: 3.10
# 架构：PyQt6 桌面应用 + CosyVoice 语音生成
# ==============================================================================
#
# 平台支持说明：
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# 1. **macOS (Intel)**    → CPU 模式
# 2. **macOS (M1/M2/M3)** → MPS 加速（Metal Performance Shaders）
# 3. **Windows (NVIDIA)** → CUDA GPU 加速
# 4. **Windows (其他)**   → CPU 模式
# 5. **Linux (NVIDIA)**   → CUDA GPU 加速 + TensorRT + DeepSpeed
# 6. **Linux (其他)**     → CPU 模式
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
#
# ==============================================================================

# ==============================================================================
# PyTorch 核心库（跨平台版本）
# ==============================================================================
# macOS: 自动安装 CPU/MPS 版本
# Windows: 自动安装 CPU 版本（可选 CUDA）
# Linux: 自动安装 CPU 版本（可手动安装 CUDA 版本）
torch==2.3.1
torchaudio==2.3.1
torchvision==0.18.1

# ==============================================================================
# GUI 框架依赖（PyQt6 桌面应用）
# ==============================================================================
PyQt6==6.6.1
PyQt6-WebEngine==6.6.1  # 可选：如需内嵌浏览器功能
psutil==5.9.8

# ==============================================================================
# 音频处理库
# ==============================================================================
librosa==0.10.2
soundfile==0.12.1
pyworld==0.3.4
mutagen==1.46.0
SpeechRecognition==3.10.1

# ==============================================================================
# AI/ML 核心库
# ==============================================================================
transformers==4.51.3
x-transformers==2.11.24
diffusers==0.29.0
lightning==2.2.4
torchmetrics>=0.11.4
einops>=0.7.0

# ==============================================================================
# 数值计算库
# ==============================================================================
numpy==1.26.4
scipy
pandas
pyarrow==18.1.0

# ==============================================================================
# 配置管理
# ==============================================================================
omegaconf==2.3.0
Hydra-Core==1.3.2
HyperPyYAML==1.2.2
hydra-colorlog==1.2.0
hydra-optuna-sweeper==1.2.0

# ==============================================================================
# ONNX Runtime（跨平台配置）
# ==============================================================================
onnx==1.16.0
# Linux 和 Windows: 使用 GPU 版本（如果有 NVIDIA GPU）
onnxruntime-gpu==1.18.0 ; sys_platform == 'linux' or sys_platform == 'win32'
# macOS: 使用 CPU 版本（不支持 CUDA）
onnxruntime==1.18.0 ; sys_platform == 'darwin'

# ==============================================================================
# TensorRT（仅 Linux，自动跳过其他平台）
# ==============================================================================
tensorrt-cu12==10.13.3.9 ; sys_platform == 'linux'
tensorrt-cu12-bindings==10.13.3.9 ; sys_platform == 'linux'
tensorrt-cu12-libs==10.13.3.9 ; sys_platform == 'linux'

# ==============================================================================
# DeepSpeed（仅 Linux，自动跳过其他平台）
# ==============================================================================
deepspeed==0.15.1 ; sys_platform == 'linux'

# ==============================================================================
# 模型下载和工具
# ==============================================================================
modelscope==1.20.0
huggingface_hub>=0.16.0
gdown==5.1.0
wget==3.2

# ==============================================================================
# Matcha-TTS 依赖
# ==============================================================================
phonemizer
Unidecode
Cython
rootutils
inflect==7.3.1

# ==============================================================================
# Jupyter 和开发工具
# ==============================================================================
notebook
ipywidgets

# ==============================================================================
# 可视化
# ==============================================================================
matplotlib==3.7.5
seaborn

# ==============================================================================
# 其他工具库
# ==============================================================================
conformer==0.3.2
protobuf==4.25
grpcio==1.57.0
grpcio-tools==1.57.0
networkx==3.1
openai-whisper==20231117
pydantic==2.7.0
rich==13.7.1
wetext==0.0.4

# ==============================================================================
# 日志和监控
# ==============================================================================
loguru>=0.7.0
tensorboard==2.14.0

# ==============================================================================
# 已移除的依赖说明
# ==============================================================================
# 1. gputil==1.4.0 - 仅支持 Linux NVIDIA GPU，macOS/Windows 不可用
# 2. piper_phonemize - 需要 Python >=3.11，已改用 phonemizer
#
# vllm 推理加速（可选，需要独立环境）：
# 官方要求：vllm==v0.9.0 + torch==2.7.0
#
# 如果需要使用 vllm 推理，请创建独立环境：
#
#   conda create -n cosyvoice_vllm --clone cosyvoice
#   conda activate cosyvoice_vllm
#   pip install vllm==v0.9.0 transformers==4.51.3 numpy==1.26.4
#
# 注意：
# - vllm 环境仅供推理使用，不影响主开发环境
# - 主环境使用 torch 2.3.1（CosyVoice 标准要求）
# - vllm 环境使用 torch 2.7.0（vllm 要求）
# - vllm 仅支持 Linux，不支持 macOS/Windows
# ==============================================================================